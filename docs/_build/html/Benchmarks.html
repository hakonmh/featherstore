
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Benchmarks &#8212; FeatherStore 0.2.1 documentation</title>
  <script>
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1e1de1a1873e13ef5536" rel="stylesheet">

  
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/6.1.2/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Benchmarks';</script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Snapshot" href="API/Snapshot.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="index.html">

  
  
  
  
  
  
  

  
    <img src="_static/logo-dark.png" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo-light.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="Introduction.html">
                        Introduction
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="Quickstart.html">
                        Quickstart
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="API%20Reference.html">
                        API Reference
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="#">
                        Benchmarks
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      <div class="navbar-end-item navbar-end__search-button-container">
        
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
      </div>
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/hakonmh/featherstore" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>


  
  <div class="search-button-container--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
  </div>

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar hide-on-wide">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                <li class="nav-item">
                    <a class="nav-link" href="Introduction.html">
                        Introduction
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="Quickstart.html">
                        Quickstart
                    </a>
                </li>
                

                <li class="nav-item">
                    <a class="nav-link" href="API%20Reference.html">
                        API Reference
                    </a>
                </li>
                

                <li class="nav-item current active">
                    <a class="nav-link" href="#">
                        Benchmarks
                    </a>
                </li>
                
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <span class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" data-toggle="tooltip">
    <a class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="fa-regular fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          <a href="https://github.com/hakonmh/featherstore" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-toggle="tooltip"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
    
  </div>

  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

      </div>
      <main class="bd-main">
        
        
        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                
            </div>
            
            
            <article class="bd-article" role="main">
              
  <section id="benchmarks">
<h1>Benchmarks<a class="headerlink" href="#benchmarks" title="Permalink to this heading">#</a></h1>
<p>In this benchmark we’ll compare how well FeatherStore, Feather, Parquet, CSV,
Pickle and DuckDB perform when reading and writing Pandas DataFrames.</p>
<p>The benchmark ran on the following computer:</p>
<ul class="simple">
<li><p>CPU: Intel© Core™ i5-11600</p></li>
<li><p>RAM: 48 GB DDR4 (3200 MHz)</p></li>
<li><p>SSD: 1 TB M.2 NVMe (3470/3000 Read/Write MBps)</p></li>
<li><p>GPU: NVIDIA GeForce GTX 1060 6GB (Not used during the benchmark)</p></li>
</ul>
<section id="vs-other-libraries">
<h2>VS Other Libraries<a class="headerlink" href="#vs-other-libraries" title="Permalink to this heading">#</a></h2>
<p>The code used for these benchmarks can be found <a class="reference external" href="https://github.com/hakonmh/featherstore/blob/master/benchmarks/external.py">here</a>.</p>
<section id="first-dataset">
<h3>First Dataset<a class="headerlink" href="#first-dataset" title="Permalink to this heading">#</a></h3>
<p>Let’s start small, the first dataset is made up of 6,000 fields of random
data with the shape of 1,000 rows and 6 columns. The data consists of strings,
ints, uints, bools, floats, and datetime, with one column of each data type.</p>
<a class="reference internal image-reference" href="_images/write_first.png"><img alt="_images/write_first.png" class="align-center" src="_images/write_first.png" style="width: 750px;" /></a>
<a class="reference internal image-reference" href="_images/read_first.png"><img alt="_images/read_first.png" class="align-center" src="_images/read_first.png" style="width: 750px;" /></a>
<p>As you can see, for small DataFrames, Pickle is the fastest solution. While
FeatherStore is around the middle of the pack for both reads and writes.</p>
</section>
<section id="second-dataset">
<h3>Second Dataset<a class="headerlink" href="#second-dataset" title="Permalink to this heading">#</a></h3>
<p>The second dataset is made up of 600 million fields of random data in the shape
10 million rows and 60 columns (Approx. 6.4 Gb of data when stored as CSV).
The data consists of strings, ints, uints, bools, floats, and datetimes, with
10 columns of each data type.</p>
<a class="reference internal image-reference" href="_images/write_second.png"><img alt="_images/write_second.png" class="align-center" src="_images/write_second.png" style="width: 750px;" /></a>
<a class="reference internal image-reference" href="_images/read_second.png"><img alt="_images/read_second.png" class="align-center" src="_images/read_second.png" style="width: 750px;" /></a>
<p>Here’s where FeatherStore really shines, matching Pickle on read speed and
Feather on write speed.</p>
</section>
</section>
<section id="internal-benchmarks">
<h2>Internal Benchmarks<a class="headerlink" href="#internal-benchmarks" title="Permalink to this heading">#</a></h2>
<p>The code used for these benchmarks (and more) can be found <a class="reference external" href="https://github.com/hakonmh/featherstore/blob/master/benchmarks/internal.py">here</a>.</p>
<section id="pandas-vs-polars-and-arrow">
<h3>Pandas vs Polars and Arrow<a class="headerlink" href="#pandas-vs-polars-and-arrow" title="Permalink to this heading">#</a></h3>
<p>In addition to supporting reading and writing Pandas DataFrames, FeatherStore
also supports reading and writing Polars DataFrames and PyArrow Tables.
These two data structures use the Apache Arrow Columnar Format as a memory
model, allowing reads and writes without serializing and deserializing to and
from Pandas.</p>
<p>We will benchmark using the second dataset, comparing reading and writing
the dataset as Pandas DataFrame, Polars DataFrame, and PyArrow Table
using FeatherStore.</p>
<a class="reference internal image-reference" href="_images/write_internal.png"><img alt="_images/write_internal.png" class="align-center" src="_images/write_internal.png" style="width: 750px;" /></a>
<a class="reference internal image-reference" href="_images/read_internal.png"><img alt="_images/read_internal.png" class="align-center" src="_images/read_internal.png" style="width: 750px;" /></a>
<p>Skipping serialization makes FeatherStore extremely fast when reading to Arrow
and Polars. It’s not easy to see based on the chart, but read Arrow is clocking
in at just 4.36 ms, while read Polars takes 362 ms.</p>
</section>
<section id="predicate-filtering">
<h3>Predicate Filtering<a class="headerlink" href="#predicate-filtering" title="Permalink to this heading">#</a></h3>
<p>In addition to the performance given to us by the underlying Feather files,
FeatherStore partitions our data into multiple files. This allows us to read
parts of the data without reading the full table, saving both time and memory
usage.</p>
<a class="reference internal image-reference" href="_images/read_cols_internal.png"><img alt="_images/read_cols_internal.png" class="align-center" src="_images/read_cols_internal.png" style="width: 750px;" /></a>
<p>Reading 25 % of the columns cuts the time to read Pandas from 11.5 s to 4.8 s.
Similar improvements can also be seen when reading Polars.</p>
<a class="reference internal image-reference" href="_images/read_rows_internal.png"><img alt="_images/read_rows_internal.png" class="align-center" src="_images/read_rows_internal.png" style="width: 750px;" /></a>
<p>Reading 25 % of the rows takes between 3.5 s and 5.0 s when reading Pandas,
dependent on how you read them (list of rows vs range query).</p>
<p>It should be noted that the performance when filtering rows is dependent
on the partition size used. Smaller partitions allow us to skip more rows
when reading, with the trade-off being slower performance when doing full table
reads and writes. In these benchmarks, the default 128 Mb was used as the
partition size.</p>
</section>
</section>
</section>


            </article>
            
            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="API/Snapshot.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title">Snapshot</p>
      </div>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#vs-other-libraries">
   VS Other Libraries
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#first-dataset">
     First Dataset
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#second-dataset">
     Second Dataset
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#internal-benchmarks">
   Internal Benchmarks
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pandas-vs-polars-and-arrow">
     Pandas vs Polars and Arrow
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#predicate-filtering">
     Predicate Filtering
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
</div>

<div class="toc-item">
  
<div id="searchbox"></div>
</div>

<div class="toc-item">
  
</div>

<div class="toc-item">
  
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
          </div>
        </footer>
        
      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1e1de1a1873e13ef5536"></script>

  <footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2021, Håkon Magne Holmen.<br>

</p>

  </div>
  
  <div class="footer-item">
    
<p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>

  </div>
  
</div>
  </footer>
  </body>
</html>